#!/bin/bash

# Sökväg till mappen där skärmbilderna ska sparas
screenshot_folder="$HOME/Pictures/Screenshots"

# Filnamnet för skärmbilden baserat på datum och tid
screenshot_file="$screenshot_folder/screenshot_$(date "+%Y%m%d_%H%M%S").png"

highlight_color="00ff00"  # Ange färgkoden här, t.ex. 00ff00 för grönt

if [[ $1 == "select" ]]; then
    # Ta en temporär skärmbild av ett markerat område med genomskinlig markering
    tmp_file=$(mktemp "$screenshot_folder/tmp_screenshot_XXXXXXXX.png")
    maim -s -u -l -b 5 -c "$highlight_color" -C 0.5 "$tmp_file"

    # Kontrollera om den temporära skärmbilden är icke-nollstorlek
    if [ -s "$tmp_file" ]; then
        mv "$tmp_file" "$screenshot_file"
        xclip -selection clipboard -t image/png < "$screenshot_file"
    else
        rm "$tmp_file"  # Ta bort tom fil
    fi
else
    # Ta en skärmbild av hela skärmen
    maim -u | tee "$screenshot_file" | xclip -selection clipboard -t image/png
fi
